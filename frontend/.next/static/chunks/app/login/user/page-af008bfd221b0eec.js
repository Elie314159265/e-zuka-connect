(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[558],{8003:function(e,t,n){Promise.resolve().then(n.bind(n,3551))},6463:function(e,t,n){"use strict";var r=n(1169);n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},3551:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(7437),a=n(2265),s=n(6349),l=n(7138),i=n(6463),o=n(8320);let u={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},c={type:"tween",ease:"anticipate",duration:.5},d=e=>{let{children:t}=e;return(0,r.jsx)(s.E.div,{className:"min-h-screen flex items-center justify-center bg-gray-50 py-24 px-4",initial:"initial",animate:"in",exit:"out",variants:u,transition:c,children:(0,r.jsx)("div",{className:"max-w-md w-full bg-white p-8 md:p-12 rounded-2xl shadow-lg",children:t})})};function m(){let[e,t]=(0,a.useState)(""),[n,u]=(0,a.useState)(""),[c,m]=(0,a.useState)(""),[h,f]=(0,a.useState)(!1),p=(0,i.useRouter)(),{setToken:g}=(0,o.t)(),b=async t=>{t.preventDefault(),m(""),f(!0);let r=new URLSearchParams;r.append("username",e),r.append("password",n);let a="".concat("http://localhost:8000","/api/token/");a.startsWith("http:")&&(a=a.replace("http:","https:"));try{let e=await fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});if(!e.ok){let t=await e.json();throw Error(t.detail||"ログインに失敗しました。")}let t=await e.json();g(t.access_token),p.push("/mypage")}catch(e){m(e instanceof Error?e.message:"不明なエラーが発生しました。")}finally{f(!1)}};return(0,r.jsxs)(d,{children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)(l.default,{href:"/",className:"text-3xl font-bold text-gray-800 mb-2",children:"e-ZUKA CONNECT"}),(0,r.jsx)("p",{className:"text-gray-600",children:"お客様ログイン"})]}),(0,r.jsxs)("form",{onSubmit:b,children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"login-email",className:"block text-gray-700 text-sm font-bold mb-2",children:"メールアドレス"}),(0,r.jsx)("input",{type:"email",id:"login-email",value:e,onChange:e=>t(e.target.value),className:"shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"email@example.com",required:!0})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"login-password",className:"block text-gray-700 text-sm font-bold mb-2",children:"パスワード"}),(0,r.jsx)("input",{type:"password",id:"login-password",value:n,onChange:e=>u(e.target.value),className:"shadow-sm appearance-none border rounded-lg w-full py-3 px-4 text-gray-700 mb-3 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"******************",required:!0}),(0,r.jsx)(l.default,{href:"#",className:"text-sm text-blue-600 hover:text-blue-800",children:"パスワードを忘れましたか？"})]}),c&&(0,r.jsx)("p",{className:"text-red-500 text-xs italic mb-4 text-center",children:c}),(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsx)(s.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline transition-colors disabled:opacity-50",type:"submit",disabled:h,children:h?"ログイン中...":"ログイン"})})]}),(0,r.jsxs)("p",{className:"text-center text-gray-600 text-sm mt-8",children:["アカウントをお持ちでないですか？ ",(0,r.jsx)(l.default,{href:"/register/user",className:"font-bold text-blue-600 hover:text-blue-800",children:"新規登録"})]})]})}},8320:function(e,t,n){"use strict";n.d(t,{t:function(){return s}});var r=n(903),a=n(9291);let s=(0,r.U)()((0,a.tJ)((e,t)=>({token:null,setToken:t=>e({token:t}),isLoggedIn:()=>!!t().token}),{name:"auth-storage",storage:(0,a.FL)(()=>sessionStorage)}))},9291:function(e,t,n){"use strict";function r(e,t){let n;try{n=e()}catch(e){return}return{getItem:e=>{var r;let a=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),s=null!=(r=n.getItem(e))?r:null;return s instanceof Promise?s.then(a):a(s)},setItem:(e,r)=>n.setItem(e,JSON.stringify(r,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)}}n.d(t,{FL:function(){return r},tJ:function(){return s}});let a=e=>t=>{try{let n=e(t);if(n instanceof Promise)return n;return{then:e=>a(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>a(t)(e)}}},s=(e,t)=>(n,s,l)=>{let i,o={storage:r(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},u=!1,c=new Set,d=new Set,m=o.storage;if(!m)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...e)},s,l);let h=()=>{let e=o.partialize({...s()});return m.setItem(o.name,{state:e,version:o.version})},f=l.setState;l.setState=(e,t)=>{f(e,t),h()};let p=e((...e)=>{n(...e),h()},s,l);l.getInitialState=()=>p;let g=()=>{var e,t;if(!m)return;u=!1,c.forEach(e=>{var t;return e(null!=(t=s())?t:p)});let r=(null==(t=o.onRehydrateStorage)?void 0:t.call(o,null!=(e=s())?e:p))||void 0;return a(m.getItem.bind(m))(o.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===o.version)return[!1,e.state];if(o.migrate){let t=o.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[r,a]=e;if(n(i=o.merge(a,null!=(t=s())?t:p),!0),r)return h()}).then(()=>{null==r||r(i,void 0),i=s(),u=!0,d.forEach(e=>e(i))}).catch(e=>{null==r||r(void 0,e)})};return l.persist={setOptions:e=>{o={...o,...e},e.storage&&(m=e.storage)},clearStorage:()=>{null==m||m.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>g(),hasHydrated:()=>u,onHydrate:e=>(c.add(e),()=>{c.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},o.skipHydration||g(),i||p}},903:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var r=n(2265);let a=e=>{let t;let n=new Set,r=(e,r)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=r?r:"object"!=typeof a||null===a)?a:Object.assign({},t,a),n.forEach(n=>n(t,e))}},a=()=>t,s={setState:r,getState:a,getInitialState:()=>l,subscribe:e=>(n.add(e),()=>n.delete(e))},l=t=e(r,a,s);return s},s=e=>e?a(e):a,l=e=>e,i=e=>{let t=s(e),n=e=>(function(e,t=l){let n=r.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return r.useDebugValue(n),n})(t,e);return Object.assign(n,t),n},o=e=>e?i(e):i}},function(e){e.O(0,[349,138,971,23,744],function(){return e(e.s=8003)}),_N_E=e.O()}]);